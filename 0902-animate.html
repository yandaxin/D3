<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>动画效果</title>
	<script type="text/javascript" src="d3.js"></script>
</head>
<body>

	<svg width="300" height="300">
		<circle r="10" cx="20" cy="20" color="black" id="moveball"/>
		
	</svg>

	<script type="text/javascript">
		var dataset=[70,80,90];

		var svg=d3.select("body").append("svg")
		.attr("width",300)
		.attr("height",300);

		var g=svg.append("g");

		var rect=g.selectAll("rect")
		.data(dataset)
		.enter()
		.append("rect")
		.attr("fill","steelblue")
		.attr("id",function(d,i){ return "rect"+i;})
		.attr("x",10)
		.attr("y",function(d,i){ return 10+i*35;})
		.attr("width",function(d,i){return d;})
		.attr("height",30);

		g.transition()
		.select("#rect1")
		.attr("width",200)  //过渡的属性
		.duration(1000);




		d3.timer(updateBall,2000);

		var i=0;


		function updateBall(){

			console.log("开始调用updateBall()");


			var dataset=[
			{x:40,y:40},
			{x:120,y:70},{x:200,y:50},{x:140,y:40},{x:60,y:80},{x:60,y:100},{x:60,y:150},{x:60,y:200},
			{x:40,y:40},{x:140,y:40},{x:60,y:80},{x:60,y:100},{x:60,y:150},{x:60,y:200}];

			var ball=d3.select("#moveball");

	
			ball.attr("cx",dataset[i].x)
			.attr("cy",dataset[i].y);
			if(i<dataset.length)
			{
					i++;
			}
			else{

				i=0;
			}
		


		}

	</script>
</body>
</html>